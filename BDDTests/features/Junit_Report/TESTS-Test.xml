<testsuite errors="1" failures="1" name="Test.As a Ontology User, I want to check table structure tests" skipped="0" tests="5" time="17.870023"><testcase classname="Test.As a Ontology User, I want to check table structure tests" name="Check the list of tables exists between Ingest Exposure" status="failed" time="2.492143"><failure message="There are differences between source to Target..!!" type="AssertionError">
<![CDATA[
Failing step: Then I should get the difference from "Source" to "Target" in "Test_Ingest_Exposure" csv file ... failed in 0.019s
Location: Test\Test.feature:18
Assertion Failed: There are differences between source to Target..!!
Captured stdout:
In Start of Setup <<--===COUNNECTION COUNT.... : 0
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Ingest
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 1
In Start of Setup <<--===COUNNECTION COUNT.... : 1
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Exposure
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 2
ColNames1 : ['drug_id', 'indication_id', 'status_id']
context.diffSourceToTarget ===>  [['drug_id', 'indication_id', 'status_id']]
Query : select * from demo.Ing_ChemProc
Schema Name : source
<<---------------End of I execute following query...------------------------->>
ColNames2 : ['drug_id', 'indication_id', 'status_id']
context.diffTargetToSource ===>  [['drug_id', 'indication_id', 'status_id']]
Query : select * from demo.Exp_Chem
Schema Name : target
<<---------------End of I execute following query...------------------------->>
In Last Step ---- context.diffSourceToTarget ===>  [['drug_id', 'indication_id', 'status_id']]
In Last Step ---- context.diffTargetToSource ===>  [['drug_id', 'indication_id', 'status_id']]
diffSchema1 ------------->>>>>>>> Source
diffSchema2 ------------->>>>>>>> Target
context.listSource : [('53118', '158', 'NDR'), ('53118', '515', 'NDR'), ('53118', '36', 'C3'), ('53118', None, 'NDR')]
~~~~~~~Length of DiffSourceToTarget--~~~~~~----> diffSourceToTarget :  3
-------------------In CSV------------ diffList: [['drug_id', 'indication_id', 'status_id'], ('53118', '36', 'C3'), ('53118', None, 'NDR')]
-------------------End of CSV------------ diffList:
]]>
</failure><system-out>
<![CDATA[
@scenario.begin

  @test2
  Scenario: Check the list of tables exists between Ingest Exposure
    Given I set up the database connections for "Ingest" on "CCDEV" environment ... passed in 1.023s
    And I set up the database connections for "Exposure" on "CCDEV" environment ... passed in 0.681s
    When I execute following query for "source" Schema ... passed in 0.388s
      """
      select * from demo.Ing_ChemProc
      """
    When I execute following query for "target" Schema ... passed in 0.381s
      """
      select * from demo.Exp_Chem
      """
    Then I should get the difference from "Source" to "Target" in "Test_Ingest_Exposure" csv file ... failed in 0.019s
    And I should get the difference from "Target" to "Source" in "Test_Exposure_Ingest" csv file ... skipped in 0.000s

@scenario.end
--------------------------------------------------------------------------------

Captured stdout:
In Start of Setup <<--===COUNNECTION COUNT.... : 0
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Ingest
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 1
In Start of Setup <<--===COUNNECTION COUNT.... : 1
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Exposure
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 2
ColNames1 : ['drug_id', 'indication_id', 'status_id']
context.diffSourceToTarget ===>  [['drug_id', 'indication_id', 'status_id']]
Query : select * from demo.Ing_ChemProc
Schema Name : source
<<---------------End of I execute following query...------------------------->>
ColNames2 : ['drug_id', 'indication_id', 'status_id']
context.diffTargetToSource ===>  [['drug_id', 'indication_id', 'status_id']]
Query : select * from demo.Exp_Chem
Schema Name : target
<<---------------End of I execute following query...------------------------->>
In Last Step ---- context.diffSourceToTarget ===>  [['drug_id', 'indication_id', 'status_id']]
In Last Step ---- context.diffTargetToSource ===>  [['drug_id', 'indication_id', 'status_id']]
diffSchema1 ------------->>>>>>>> Source
diffSchema2 ------------->>>>>>>> Target
context.listSource : [('53118', '158', 'NDR'), ('53118', '515', 'NDR'), ('53118', '36', 'C3'), ('53118', None, 'NDR')]
~~~~~~~Length of DiffSourceToTarget--~~~~~~----> diffSourceToTarget :  3
-------------------In CSV------------ diffList: [['drug_id', 'indication_id', 'status_id'], ('53118', '36', 'C3'), ('53118', None, 'NDR')]
-------------------End of CSV------------ diffList:

]]>
</system-out></testcase><testcase classname="Test.As a Ontology User, I want to check table structure tests" name="Check the list of tables exists between Ingest vs Exposure in CCDEV" status="passed" time="2.748158"><system-out>
<![CDATA[
@scenario.begin

  @ccdev
  Scenario: Check the list of tables exists between Ingest vs Exposure in CCDEV
    Given I set up the database connections for "Ingest" on "CCDEV" environment ... passed in 0.686s
    And I set up the database connections for "Exposure" on "CCDEV" environment ... passed in 0.694s
    Given I set up the database connections for "Ingest" on "CCDEV" environment ... passed in 0.683s
    And I set up the database connections for "Exposure" on "CCDEV" environment ... passed in 0.685s

@scenario.end
--------------------------------------------------------------------------------

Captured stdout:
In Start of Setup <<--===COUNNECTION COUNT.... : 0
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Ingest
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 1
In Start of Setup <<--===COUNNECTION COUNT.... : 1
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Exposure
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 2
In Start of Setup <<--===COUNNECTION COUNT.... : 2
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Ingest
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 3
In Start of Setup <<--===COUNNECTION COUNT.... : 3
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Exposure
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 4

]]>
</system-out></testcase><testcase classname="Test.As a Ontology User, I want to check table structure tests" name="Check the list of tables exists between Ingest vs Exposure in CCPROD" status="failed" time="3.404195"><error message="local variable 'con' referenced before assignment" type="UnboundLocalError">
<![CDATA[
Failing step: Given I set up the database connections for "Ingest" on "CCPROD" environment ... failed in 2.020s
Location: Test\Test.feature:31
Traceback (most recent call last):
  File "c:\work\python\contentpipeline\BDDCommon\CommonFuncs\CommonFunctions.py", line 23, in connect_db
    con = psycopg2.connect(dbname=dbName, user=dbUser, host=dbHost, password=dbPassword, port=dbPort)
  File "c:\program files (x86)\python36-32\lib\site-packages\psycopg2\__init__.py", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: could not connect to server: Connection refused (0x0000274D/10061)
	Is the server running on host "localhost" (127.0.0.1) and accepting
	TCP/IP connections on port 5433?
could not connect to server: Connection refused (0x0000274D/10061)
	Is the server running on host "localhost" (::1) and accepting
	TCP/IP connections on port 5433?


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\program files (x86)\python36-32\lib\site-packages\behave\model.py", line 1456, in run
    match.run(runner.context)
  File "c:\program files (x86)\python36-32\lib\site-packages\behave\model.py", line 1903, in run
    self.func(context, *args, **kwargs)
  File "steps\commonsteps.py", line 13, in I_setup_the_database_connections_for_Oracle
    context.target_con = CommonFunctions.connect_db(schema, dbEnv)
  File "c:\work\python\contentpipeline\BDDCommon\CommonFuncs\CommonFunctions.py", line 48, in connect_db
    con.close();
UnboundLocalError: local variable 'con' referenced before assignment

Captured stdout:
In Start of Setup <<--===COUNNECTION COUNT.... : 0
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Ingest
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 1
In Start of Setup <<--===COUNNECTION COUNT.... : 1
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Exposure
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 2
In Start of Setup <<--===COUNNECTION COUNT.... : 2
<<<<<<<CCPROD Environment excuted..>>>>>>>>!!
========------------DB is not connected-----------------======...!! could not connect to server: Connection refused (0x0000274D/10061)
	Is the server running on host "localhost" (127.0.0.1) and accepting
	TCP/IP connections on port 5433?
could not connect to server: Connection refused (0x0000274D/10061)
	Is the server running on host "localhost" (::1) and accepting
	TCP/IP connections on port 5433?

]]>
</error><system-out>
<![CDATA[
@scenario.begin

  @ccprod
  Scenario: Check the list of tables exists between Ingest vs Exposure in CCPROD
    Given I set up the database connections for "Ingest" on "CCDEV" environment ... passed in 0.701s
    And I set up the database connections for "Exposure" on "CCDEV" environment ... passed in 0.683s
    Given I set up the database connections for "Ingest" on "CCPROD" environment ... failed in 2.020s
    And I set up the database connections for "Exposure" on "CCPROD" environment ... skipped in 0.000s

@scenario.end
--------------------------------------------------------------------------------

Captured stdout:
In Start of Setup <<--===COUNNECTION COUNT.... : 0
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Ingest
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 1
In Start of Setup <<--===COUNNECTION COUNT.... : 1
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Exposure
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 2
In Start of Setup <<--===COUNNECTION COUNT.... : 2
<<<<<<<CCPROD Environment excuted..>>>>>>>>!!
========------------DB is not connected-----------------======...!! could not connect to server: Connection refused (0x0000274D/10061)
	Is the server running on host "localhost" (127.0.0.1) and accepting
	TCP/IP connections on port 5433?
could not connect to server: Connection refused (0x0000274D/10061)
	Is the server running on host "localhost" (::1) and accepting
	TCP/IP connections on port 5433?


]]>
</system-out></testcase><testcase classname="Test.As a Ontology User, I want to check table structure tests" name="Check the list of tables exists between Ingest vs Staging in CCDEV" status="passed" time="5.573319"><system-out>
<![CDATA[
@scenario.begin

  @ccdev @oracle
  Scenario: Check the list of tables exists between Ingest vs Staging in CCDEV
    Given I set up the database connections for "Ingest" on "CCDEV" environment ... passed in 0.690s
    And I set up the database connections for "Exposure" on "CCDEV" environment ... passed in 0.688s
    Given I set up the database connections for "Ingest" on "CCDEV" environment ... passed in 0.681s
    And I set up the database connections for "Staging" on "STABLE" environment ... passed in 3.514s

@scenario.end
--------------------------------------------------------------------------------

Captured stdout:
In Start of Setup <<--===COUNNECTION COUNT.... : 0
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Ingest
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 1
In Start of Setup <<--===COUNNECTION COUNT.... : 1
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Exposure
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 2
In Start of Setup <<--===COUNNECTION COUNT.... : 2
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Ingest
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 3
In Start of Setup <<--===COUNNECTION COUNT.... : 3
In Oracle Staging Connection...!!
<<<<<<<STABLE ORACLE Environment excuted..>>>>>>>>!!
Qa Oracle Version :- 11.2.0.4.0
dbEnv : STABLE  -- schema : Staging
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 4

]]>
</system-out></testcase><testcase classname="Test.As a Ontology User, I want to check table structure tests" name="Check the list of tables exists between Ingest vs PROD in CCDEV" status="passed" time="3.652209"><system-out>
<![CDATA[
@scenario.begin

  @ccdev @oracle
  Scenario: Check the list of tables exists between Ingest vs PROD in CCDEV
    Given I set up the database connections for "Ingest" on "CCDEV" environment ... passed in 0.696s
    And I set up the database connections for "Exposure" on "CCDEV" environment ... passed in 0.692s
    Given I set up the database connections for "Ingest" on "CCDEV" environment ... passed in 0.682s
    And I set up the database connections for "Staging" on "PROD" environment ... passed in 1.582s

@scenario.end
--------------------------------------------------------------------------------

Captured stdout:
In Start of Setup <<--===COUNNECTION COUNT.... : 0
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Ingest
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 1
In Start of Setup <<--===COUNNECTION COUNT.... : 1
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Exposure
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 2
In Start of Setup <<--===COUNNECTION COUNT.... : 2
<<<<<<<CCDEV Environment excuted..>>>>>>>>!!
dbEnv : CCDEV  -- schema : Ingest
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 3
In Start of Setup <<--===COUNNECTION COUNT.... : 3
In Oracle Staging Connection...!!
<<<<<<<PROD ORACLE Environment excuted..>>>>>>>>!!
Qa Oracle Version :- 11.2.0.4.0
dbEnv : PROD  -- schema : Staging
++++++++++++++++++Connected to DB..!+++++++++++++++++
COUNNECTION COUNT.... : 4

]]>
</system-out></testcase></testsuite>